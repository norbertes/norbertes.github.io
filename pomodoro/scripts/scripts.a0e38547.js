(function(){"use strict";angular.module("pomodoroApp",["ngAnimate","ngCookies","ngResource","ngRoute","ngSanitize","ngTouch"]).config(["$routeProvider",function(a){return a.when("/",{controller:"CounterCtrl"},"timeTableCtrl").otherwise({redirectTo:"/"})}])}).call(this),function(){"use strict";angular.module("pomodoroApp").directive("timeTable",function(){return{templateUrl:"views/timetable.html",className:"footer-bar-btns visible-xs",restrict:"E",controllerAs:"timeTableCtrl",controller:["$scope",function(a){var b;return b=function(b){var c,d,e,f;return f="","work"===b?(e="images/pomodoro.png",f=' style="padding-top:1px;"'):(c=a.timeTable.filter(function(a){return"break"===a.type}),e=c.length%4===0?"images/dinner.png":"images/coffee.png"),d='<div class="icon-pos" '+f+'><img src="'+e+'" /></div>',$(".js-timetable").append(d)},a.$on("addWork",function(){return b("work")}),a.$on("addBreak",function(){return b("break")})}]}})}.call(this),function(){"use strict";angular.module("pomodoroApp").directive("counter",function(){return{templateUrl:"views/main.html",restrict:"E",controllerAs:"CounterCtrl",controller:["$scope","$timeout","$window",function(a,b){var c,d,e,f,g,h,i,j,k,l,m;return a.pomodoroTime=1500,a.shortBreak=300,a.counter=a.pomodoroTime,a.longBreak=1500,a.isActive=!0,a.timeTable=[],e=!1,m=!0,a.$on("stopCounter",function(){return a.isActive?void 0:a.toggleCounter()}),a.$on("changeBg",function(){return j(2)}),j=function(b){var c;return 1===b?c="rgb(33, 90, 112)":2===b?(localStorage.setItem("workbg",a.workBg),c=a.workBg):3===b&&(c="rgb(138, 48, 25)"),$("body").css("background",c)},k=function(a){var b,c;return 1===a?(c=d()?"images/coffee.png":"images/dinner.png",b=new Notify("Pomodoro",{body:"Czas na przerwÄ™!",icon:c,timeout:10})):2===a?b=new Notify("Pomodoro",{body:"Koniec przerwy!",icon:"images/pomodoro.png",timeout:10}):3===a&&(b=new Notify("Pomodoro",{body:"Alert!",icon:"images/pomodoro.png",timeout:10})),b.onclick=function(){return window.focus(),this.cancel()},b.show()},h=function(){return Notify.needsPermission()&&Notify.isSupported()?Notify.requestPermission():void 0},l=function(){return b.cancel(e)},g=function(b){return console.log("pushTimeTable"),"work"===b?(a.timeTable.push({date:Date.now(),type:"work"}),a.$emit("addWork")):(a.timeTable.push({date:Date.now(),type:"break"}),a.$emit("addBreak"))},i=function(){return a.toggleCounter(),f(),m=!m,m?(g("break"),j(2),k(2),a.counter=a.pomodoroTime):(g("work"),j(1),d()?(a.counter=a.shortBreak,k(1)):(a.counter=a.longBreak,k(1)))},c=function(){return localStorage.setItem("counter",a.counter),a.counter--,a.counter>0?e=b(c,1e3):i()},f=function(){var b;return a.volume?(b=new Audio("../pomodoro/sounds/success.wav"),b.volume=a.volume/100,b.play()):void 0},d=function(){var b;return console.log("isShortBreak"),b=a.timeTable.filter(function(a){return"work"===a.type}),b.length%4!==0?!0:!1},a.formatCounter=function(a){var b,c;return b=Math.floor(a/60),c=a-60*b,10>c&&(c="0"+c),b+":"+c},a.toggleCounter=function(){return h(),console.log("$scope.isActive: "+a.isActive),a.isActive?(a.$emit("counterStart"),j(m===!0?2:1),c()):(a.$emit("counterStop"),j(3),l()),a.isActive=!a.isActive},null!=localStorage.getItem("workbg")?(console.log("BG form LS "+localStorage.getItem("workbg")),$("body").css("background",localStorage.getItem("workbg"))):j(2)}]}})}.call(this),function(){"use strict";angular.module("pomodoroApp").directive("settings",function(){return{templateUrl:"views/settings.html",restrict:"E",controllerAs:"SettingsCtrl",controller:["$scope",function(a){var b,c,d,e,f;return f=!1,b="#12538B",c="rgb(33, 112, 33)",d="#414141",a.volume=75,a.workBg=c,a.$on("counterStart",function(){return e()}),a.$on("counterStop",function(){return e()}),e=function(){return f===!0?a.toggle():void 0},a.toggle=function(){return a.$emit("stopCounter"),f=!f,$(".settings-ico").toggle(),$(".settings").toggleClass("settings-rolled"),$(".wrapper").toggleClass("wrapper-rolled")},a.setBgColor=function(b){return a.workBg=b,a.$emit("changeBg",b)},a.$watch("volume",function(){return a.volume=parseFloat(a.volume)})}]}})}.call(this);
